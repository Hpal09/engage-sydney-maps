generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AdminUser {
  id            String   @id
  email         String   @unique
  password_hash String
  role          String   @default("admin")
  created_at    DateTime @default(now())
  updated_at    DateTime
}

model Deal {
  id          String   @id
  place_id    String
  title       String
  description String?
  starts_at   DateTime
  ends_at     DateTime
  is_live     Boolean  @default(true)
  tags        String[]
  created_at  DateTime @default(now())
  updated_at  DateTime
  Place       Place    @relation(fields: [place_id], references: [id])
}

model Event {
  id          String   @id
  place_id    String?
  title       String
  description String?
  starts_at   DateTime
  ends_at     DateTime
  is_live     Boolean  @default(true)
  category    String
  tags        String[]
  created_at  DateTime @default(now())
  updated_at  DateTime
  Place       Place?   @relation(fields: [place_id], references: [id])
}

model Place {
  id                String   @id
  name              String
  short_description String?
  full_description  String?
  category          String
  tags              String[]
  lat               Float
  lng               Float
  address           String?
  website_url       String?
  phone             String?
  opening_hours     String?
  price_range       String?
  rating            Float?
  is_live           Boolean  @default(true)
  created_at        DateTime @default(now())
  updated_at        DateTime
  Deal              Deal[]
  Event             Event[]
}

model map_settings {
  id             Int      @id @default(1)
  initial_zoom   Float    @default(2.5)
  place_zoom     Float    @default(2.8)
  dest_zoom      Float    @default(2.8)
  nav_zoom       Float    @default(3.0)
  nav_start_zoom Float    @default(3.5)
  created_at     DateTime @default(now())
  updated_at     DateTime
}
